import{e as M,r as h,j as e,C as m,L as l}from"./index-C7uSYYWX.js";import{T as n,a as c}from"./Textarea-DUbu4X24.js";const g={name:"",description:"",roleInstruction:"",reminderMessage:"",characterInitialMessage:[""],avatarUrl:"",modelName:"good",maxTokensPerMessage:"400",fitMessagesInContextMethod:"summarizeOld",textEmbeddingModelName:"text-embedding-ada-002",autoGenerateMemories:"v1",avatarSize:"1",avatarShape:"square",sceneBackgroundUrl:"",sceneMusicUrl:"",userCharacterName:"User",userCharacterAvatarUrl:"",loreBookUrlsText:"",customCode:""};function y({character:i,onSave:u,onCancel:x,isEditing:v=!1}){var o;const{t:a}=M(),[t,d]=h.useState(()=>({...g,...i}));h.useEffect(()=>{i&&d({...g,...i})},[i]);const s=(r,E)=>{d(f=>({...f,[r]:E}))},j=()=>{if(!t.name.trim())return;const r={...t,isOriginal:!1};u(r)},p=t.name.trim().length>0;return e.jsxs("div",{className:"space-y-6 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a(v?"characterEditor.editTitle":"characterEditor.createTitle")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{onClick:j,disabled:!p,children:a("common.save")}),e.jsx(m,{variant:"gray",onClick:x,children:a("common.cancel")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:a("characterEditor.name")}),e.jsx(n,{id:"name",type:"text",value:t.name,onChange:r=>s("name",r.target.value),placeholder:a("characterEditor.namePlaceholder"),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:a("characterEditor.description")}),e.jsx(c,{id:"description",value:t.description,onChange:r=>s("description",r.target.value),placeholder:a("characterEditor.descriptionPlaceholder"),rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"avatarUrl",children:a("characterEditor.avatarUrl")}),e.jsx(n,{id:"avatarUrl",type:"url",value:t.avatarUrl,onChange:r=>s("avatarUrl",r.target.value),placeholder:a("characterEditor.avatarUrlPlaceholder")})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"sceneBackgroundUrl",children:a("characterEditor.backgroundUrl")}),e.jsx(n,{id:"sceneBackgroundUrl",type:"url",value:t.sceneBackgroundUrl,onChange:r=>s("sceneBackgroundUrl",r.target.value),placeholder:a("characterEditor.backgroundUrlPlaceholder")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"roleInstruction",children:a("characterEditor.roleInstruction")}),e.jsx(c,{id:"roleInstruction",value:t.roleInstruction,onChange:r=>s("roleInstruction",r.target.value),placeholder:a("characterEditor.roleInstructionPlaceholder"),rows:6})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"reminderMessage",children:a("characterEditor.reminderMessage")}),e.jsx(c,{id:"reminderMessage",value:t.reminderMessage,onChange:r=>s("reminderMessage",r.target.value),placeholder:a("characterEditor.reminderMessagePlaceholder"),rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"initialMessage",children:a("characterEditor.initialMessage")}),e.jsx(c,{id:"initialMessage",value:((o=t.characterInitialMessage)==null?void 0:o[0])??"",onChange:r=>s("characterInitialMessage",[r.target.value]),placeholder:a("characterEditor.initialMessagePlaceholder"),rows:4})]})]})]}),t.avatarUrl&&e.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:t.avatarUrl,alt:t.name||"Character preview",className:`mx-auto object-cover ${t.avatarShape==="square"?"rounded-lg":"rounded-full"}`,style:{width:80,height:80},onError:r=>{r.target.style.display="none"}}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:a("characterEditor.avatarPreview")})]})})]})}export{y as default};
