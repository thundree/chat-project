import{G as x,j as a,i as o,R as v}from"./index-A52IKbjY.js";function e(c){return x({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"},child:[]}]})(c)}function g(c){return x({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.008 0A822.933 822.933 0 0 0 1.59 6.043V18c3.578 2.087 7.238 4.274 10.418 6 3.928-2.267 6.71-3.868 10.402-6v-3.043l-1.045.6v1.8l-1.545.9-1.56-.9v-1.8l1.56-.885v-.002l.268.156a8.15 8.15 0 0 0 .404-1.754v-.002a8.72 8.72 0 0 0 .072-1.072 9.885 9.885 0 0 0-.072-1.127 8.873 8.873 0 0 0-.515-1.97v-.003a8.137 8.137 0 0 0-1.301-2.242 7.113 7.113 0 0 0-.615-.699 10.271 10.271 0 0 0-.846-.728 7.91 7.91 0 0 0-1.902-1.116 4.776 4.776 0 0 0-.586-.213v-.957c.41.118.812.265 1.2.442a9.2 9.2 0 0 1 1.618.943 9.4 9.4 0 0 1 1.158.986c.273.277.53.568.774.872.532.686.97 1.44 1.302 2.244h-.002a9.45 9.45 0 0 1 .645 2.613c.04.317.06.637.056.957 0 .314-.014.614-.043.914-.082.838-.37 1.786-.542 2.373l.472.27 1.045-.602V8.986l-1.303-.742v-.002l1.303.744V6c-3.56-2.057-7.212-4.154-10.402-6Zm8.08 14.826c-.02.052.003.002.004.002zM12.035 1.213l1.56.9v1.801l-1.56.885-1.545-.885h-.002v-.328a8.458 8.458 0 0 0-1.744.516 8.178 8.178 0 0 0-1.889 1.07l-.001.002a6.77 6.77 0 0 0-.9.783 9.171 9.171 0 0 0-.616.672 8.84 8.84 0 0 0-1.3 2.228l.228.127 1.287-.742 1.203.686c1.929-1.112 3.397-1.961 5.252-3.014l.027.014c1.926 1.114 3.398 1.955 5.238 3.029.028 1.997.014 4.064.014 6.086-1.874 1.084-3.753 2.16-5.28 3.043a859.719 859.719 0 0 1-5.294-3.043V8.957l.043-.027-1.203-.688-1.287.744-.229-.129h-.002a8.376 8.376 0 0 0-.53 2.057c-.044.36-.068.723-.07 1.086.002.344.026.687.07 1.027v.002c.015.215.06.429.102.643l-.83.484a7.017 7.017 0 0 1-.2-1.199A7.065 7.065 0 0 1 2.52 12c0-.329.028-.672.056-1a9.77 9.77 0 0 1 .658-2.6 9.438 9.438 0 0 1 1.303-2.244c.243-.3.5-.57.758-.842.37-.372.773-.71 1.203-1.013-1.215-.084-1.215-.084 0-.002a9.394 9.394 0 0 1 1.645-.942 9.866 9.866 0 0 1 2.347-.7l-.002-.542-1.043-.601 1.045.6zm0 .773-.887.514v1.027l.887.516.887-.516V2.5Zm-.03 6.928c-.935.532-1.888 1.084-2.689 1.543v3.086c.933.535 1.892 1.095 2.692 1.557.926-.565 1.865-1.093 2.676-1.557v-3.086c-.945-.542-1.857-1.074-2.678-1.543Zm-7.74 5.758 1.546.885v1.8l-.329.186c.146.177.303.344.471.5.277.288.58.55.902.785a8.07 8.07 0 0 0 1.83 1.059h.002a8.14 8.14 0 0 0 2.061.57c.417.058.837.087 1.258.086a8.37 8.37 0 0 0 1.332-.1 8.64 8.64 0 0 0 2.017-.572 8.076 8.076 0 0 0 1.86-1.1c.172-.114.315-.242.472-.37l.83.47a9.79 9.79 0 0 1-.945.787l.946.541 1.302-.756-1.302.758-.946-.543c-.516.37-1.067.69-1.644.955l-.002.002a9.502 9.502 0 0 1-2.588.756c-.441.057-.885.086-1.33.086a12.048 12.048 0 0 1-1.26-.072v.002a9.38 9.38 0 0 1-2.605-.744 9.044 9.044 0 0 1-1.688-.971 9.625 9.625 0 0 1-1.775-1.658h-.002l-.412.244-1.56-.9v-1.801zm0 .756-.886.515v1.028l.887.515.886-.515v-1.028zm15.555 0-.902.515v1.028l.902.515.887-.515v-1.028z"},child:[]}]})(c)}const u=(c,r)=>r?Object.entries(r).reduce((i,[s,l])=>i.replace(new RegExp(s,"g"),l),c):c;function t({message:c,selectedChat:r,msgSender:i}){const s=c.sender!=="user";let l;return s?l=r!=null&&r.characterImage?a.jsx("img",{src:r.characterImage,alt:r.characterName,className:"w-14 h-20 rounded-md overflow-hidden object-cover"}):a.jsx(e,{className:"mx-auto",size:38}):l=a.jsx(g,{className:"mx-auto mt-1",size:38}),a.jsxs("div",{className:"p-2 flex gap-2 bg-black/80 rounded-md",children:[a.jsx("div",{className:"flex-shrink-0 w-14 text-gray-800 dark:text-blue-200",children:l}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("strong",{className:"text-blue-400",children:i}),a.jsx("div",{className:"flex-1 space-y-[6px]",children:c.text.map((n,m)=>a.jsx("p",{className:"text-gray-200",style:{color:s&&(r!=null&&r.characterColor)?r.characterColor:""},dangerouslySetInnerHTML:{__html:u(n,o(r))}},`message-text-${c.id}-${m}`))})]})]},`chat-message-${c.id}`)}const N=({messages:c,selectedChat:r,streamingResponse:i})=>{const s=v.useMemo(()=>{const l=(r==null?void 0:r.characterInitialMessage)||[];return!r||(l==null?void 0:l.length)===0?c:[{id:"0",sender:"character",text:(r==null?void 0:r.characterInitialMessage)||[]},...c]},[r,c]);return a.jsxs("div",{className:"w-full p-0 mb-4 h-auto overflow-y-auto",children:[s.length===0?a.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"No messages yet"}):s.map(l=>{let n;return l.sender==="user"?n=(r==null?void 0:r.userName)??"User":n=(r==null?void 0:r.characterName)??"Character",a.jsx("div",{className:"mb-3",children:a.jsx(t,{message:l,selectedChat:r,msgSender:n})},l.id)}),i&&a.jsxs("div",{className:"mb-3 p-3 rounded bg-yellow-100 dark:bg-yellow-900 mr-8",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Streaming... (Character)"}),a.jsx("div",{className:"text-gray-800 dark:text-gray-200",children:i})]})]})};export{N as default};
